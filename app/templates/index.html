{% extends "base.html" %}
{% block content %}

<!-- Paso 1 · Subir archivo -->
<section class="card" aria-labelledby="t1">
    <h2 id="t1">1) Subir dataset (CSV o XLSX)</h2>

    <form id="uploadForm" class="form-row">
        <input type="file" name="file" id="fileInput" accept=".csv,.xlsx" required />
        <button type="submit">Subir y previsualizar</button>
    </form>

    <p class="hint">El archivo se usa solo para generar la vista previa local.</p>
    <div id="uploadMsg" class="status mt"></div>
</section>

<!-- Paso 2 · Previsualizar -->
<section id="previewSection" class="card hidden" aria-labelledby="t2">
    <h2 id="t2">2) Previsualización</h2>

    <div class="meta-row">
        <div id="filenameBadge" class="badge"></div>
        <div id="columns" class="muted"></div>
    </div>

    <div class="table-wrapper mt">
        <table id="previewTable"></table>
    </div>

    <!-- Paso 3 · Elegir estrategias -->
    <h3 class="mt">3) Elegir estrategias por columna</h3>
    <p class="hint">El sistema sugiere opciones automáticamente; puedes ajustarlas.</p>

    <!-- Sugerencias -->
    <div id="piiSuggestions" class="mt hidden">
        <strong>Sugerencias detectadas:</strong>
        <div id="piiDetectedList" class="mt"></div>
    </div>

    <!-- Selects por columna -->
    <div id="strategyPanel" class="mt"></div>

    <!-- Ejecutar -->
    <div class="actions mt">
        <button id="runAnonymize">Anonimizar y generar reporte</button>
    </div>
</section>

{% endblock %}